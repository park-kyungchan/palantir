# /ontology-why - Ontology Integrity ì„¤ê³„ ê·¼ê±° í—¬í¼

> **Version:** 1.0.0
> **Model:** opus
> **User-Invocable:** true
> **Type:** Helper Skill (ë‹¤ë¥¸ ontology-* ìŠ¤í‚¬ì—ì„œ í˜¸ì¶œ)

---

## 1. Purpose

**"ì™œ ì´ë ‡ê²Œ ì •ì˜í–ˆëŠ”ê°€?"** ì§ˆë¬¸ì— ëŒ€í•´ **Ontology Integrity** ê´€ì ì—ì„œ
ëª…í™•í•˜ê³  ëª¨í˜¸í•¨ ì—†ì´ ì„¤ê³„ ê·¼ê±°ë¥¼ ì„¤ëª…í•˜ëŠ” í—¬í¼ ìŠ¤í‚¬.

### í•µì‹¬ ì›ì¹™

| ì›ì¹™ | ì„¤ëª… |
|------|------|
| **Ontology Integrity** | ë°ì´í„° ì¼ê´€ì„±, ì°¸ì¡° ë¬´ê²°ì„±, ì˜ë¯¸ë¡ ì  ì •í™•ì„± |
| **Palantir Architecture** | Foundry/AIP ê³µì‹ ì„¤ê³„ ì›ì¹™ ê¸°ë°˜ |
| **ëª¨í˜¸í•¨ ì—†ìŒ** | ëª…í™•í•œ ê·¼ê±° + ê²€ì¦ëœ ì¶œì²˜ URL |
| **ë²”ìš©ì„±** | ëª¨ë“  /ontology-* ìŠ¤í‚¬ì—ì„œ í˜¸ì¶œ ê°€ëŠ¥ |

---

## 2. í˜¸ì¶œ ë°©ì‹

### 2.1 ì§ì ‘ í˜¸ì¶œ (ì‚¬ìš©ì)

```bash
/ontology-why employeeIdë¥¼ Stringìœ¼ë¡œ ì •ì˜í•œ ì´ìœ ëŠ”?
/ontology-why MANY_TO_ONE vs ONE_TO_MANY ì°¨ì´ì 
/ontology-why ActionTypeì—ì„œ hazardous=TrueëŠ” ì–¸ì œ ì‚¬ìš©?
```

### 2.2 ë‹¤ë¥¸ ìŠ¤í‚¬ì—ì„œ í˜¸ì¶œ (ë‚´ë¶€)

```python
# /ontology-objecttype, /ontology-linktype ë“±ì—ì„œ í˜¸ì¶œ
async def handle_why_question(question, context):
    """
    ì‚¬ìš©ìê°€ "ì™œ?"ë¼ê³  ë¬¼ìœ¼ë©´ /ontology-why í˜¸ì¶œ
    """
    return await invoke_skill("ontology-why", {
        "question": question,
        "context": context,  # í˜„ì¬ ë¶„ì„ ì¤‘ì¸ íƒ€ì… ì •ë³´
        "type": "ObjectType"  # ë˜ëŠ” LinkType, ActionType
    })
```

---

## 3. ì§€ì› ë²”ìœ„

### 3.1 Ontology êµ¬ì„±ìš”ì†Œë³„ ì§ˆë¬¸

| êµ¬ì„±ìš”ì†Œ | ì§ˆë¬¸ ì˜ˆì‹œ |
|----------|----------|
| **ObjectType** | "ì™œ PKë¥¼ Stringìœ¼ë¡œ?", "ì™œ ì´ ì†ì„±ì´ required?" |
| **PropertyDefinition** | "ì™œ DATE vs TIMESTAMP?", "ì™œ unique=True?" |
| **LinkType** | "ì™œ MANY_TO_ONE?", "ì™œ FOREIGN_KEY êµ¬í˜„?" |
| **ActionType** | "ì™œ hazardous=True?", "ì™œ ì´ Parameterê°€ í•„ìˆ˜?" |
| **Interface** | "ì™œ Interfaceë¡œ ë¶„ë¦¬?", "ì™œ ì´ ì†ì„±ì„ ê³µìœ ?" |
| **ValueType** | "ì™œ ValueTypeìœ¼ë¡œ ì •ì˜?", "ì™œ ì´ ì œì•½ì¡°ê±´?" |
| **Automation** | "ì™œ TIME vs OBJECT_SET ì¡°ê±´?", "ì™œ ì´ Effect?" |

### 3.2 Ontology Integrity ê´€ì 

| ê´€ì  | ì„¤ëª… |
|------|------|
| **Immutability** | ë¶ˆë³€ì„± - PK, í•µì‹¬ ì‹ë³„ìê°€ ë³€ê²½ë˜ë©´ ì•ˆ ë˜ëŠ” ì´ìœ  |
| **Determinism** | ê²°ì •ì„± - ë™ì¼ ì…ë ¥ â†’ ë™ì¼ ê²°ê³¼ ë³´ì¥ |
| **Referential Integrity** | ì°¸ì¡° ë¬´ê²°ì„± - Linkê°€ ê¹¨ì§€ì§€ ì•ŠëŠ” êµ¬ì¡° |
| **Semantic Consistency** | ì˜ë¯¸ë¡ ì  ì¼ê´€ì„± - íƒ€ì…/ì œì•½ì˜ ë¹„ì¦ˆë‹ˆìŠ¤ ì˜ë¯¸ |
| **Lifecycle Management** | ìƒëª…ì£¼ê¸° - ìƒíƒœ ë³€ê²½, ì‚­ì œ ì‹œ ì˜í–¥ |

---

## 4. ì°¸ì¡° ì²´ê³„ (CRITICAL)

### 4.1 1ì°¨ ì°¸ì¡°: ontology-definition íŒ¨í‚¤ì§€

```
/home/palantir/park-kyungchan/palantir/Ontology-Definition/
â”œâ”€â”€ ontology_definition/types/      # íƒ€ì…ë³„ êµ¬ì¡°/ì œì•½ í™•ì¸
â”œâ”€â”€ ontology_definition/core/       # Enum, ê¸°ë³¸ ì›ì¹™
â””â”€â”€ tests/                          # ì‚¬ìš© íŒ¨í„´ ì°¸ì¡°
```

### 4.2 2ì°¨ ì°¸ì¡°: ì™¸ë¶€ ê²€ì¦ëœ ìë£Œ (í•­ìƒ)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  âœ… ì‹ ë¢°í•  ìˆ˜ ìˆëŠ” ì¶œì²˜ (ONLY THESE)                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  1ï¸âƒ£ Palantir ê³µì‹: palantir.com/docs/*, GitHub              â”‚
â”‚  2ï¸âƒ£ ê³µì‹ ê¸°ìˆ  ë¬¸ì„œ: Foundry, AIP, Ontology SDK              â”‚
â”‚  3ï¸âƒ£ ê²€ì¦ëœ ê¸°ì—… ì‚¬ë¡€: Case Studies, ì»¨í¼ëŸ°ìŠ¤ ë°œí‘œ          â”‚
â”‚  4ï¸âƒ£ í•™ìˆ /ê³µì‹ ìë£Œ: ë…¼ë¬¸, ë°±ì„œ                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  âŒ ì°¸ì¡° ê¸ˆì§€: ê°œì¸ ë¸”ë¡œê·¸, ë¹„ê³µì‹ Medium, SNS               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

âš ï¸ MUST: ëª¨ë“  ì„¤ëª…ì— ê²€ì¦ëœ ì¶œì²˜ URL í¬í•¨
   URL ì—†ëŠ” ì£¼ì¥ì€ ì œê³µí•˜ì§€ ì•ŠìŒ
```

---

## 5. ì¶œë ¥ í˜•ì‹

### 5.1 ê¸°ë³¸ ì‘ë‹µ êµ¬ì¡°

```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘  ğŸ” Ontology Integrity ë¶„ì„: {ì§ˆë¬¸ ëŒ€ìƒ}                     â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘                                                              â•‘
â•‘  Q: {ì‚¬ìš©ì ì§ˆë¬¸}                                            â•‘
â•‘                                                              â•‘
â•‘  ğŸ“ ì„¤ê³„ ì›ì¹™ (Ontology Integrity):                          â•‘
â•‘  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€               â•‘
â•‘  1. {ì›ì¹™ 1}: {ì„¤ëª…}                                         â•‘
â•‘     - {ìƒì„¸ ê·¼ê±°}                                            â•‘
â•‘     - {ì˜í–¥/ê²°ê³¼}                                            â•‘
â•‘                                                              â•‘
â•‘  2. {ì›ì¹™ 2}: {ì„¤ëª…}                                         â•‘
â•‘     - {ìƒì„¸ ê·¼ê±°}                                            â•‘
â•‘                                                              â•‘
â•‘  ğŸ“š Palantir ê³µì‹ ê·¼ê±°:                                      â•‘
â•‘  "{ì¸ìš©ë¬¸}"                                                  â•‘
â•‘  ğŸ”— {ì¶œì²˜ URL}                                               â•‘
â•‘                                                              â•‘
â•‘  ğŸ’¡ ì‹¤ë¬´ ê¶Œì¥ì‚¬í•­:                                            â•‘
â•‘  {êµ¬ì²´ì ì¸ ê¶Œì¥ ì‚¬í•­}                                        â•‘
â•‘                                                              â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```

### 5.2 ì˜ˆì‹œ: Primary Key ì§ˆë¬¸

```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘  ğŸ” Ontology Integrity ë¶„ì„: employeeId                      â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘                                                              â•‘
â•‘  Q: ì™œ employeeIdë¥¼ Stringìœ¼ë¡œ ì •ì˜í–ˆëŠ”ê°€?                   â•‘
â•‘                                                              â•‘
â•‘  ğŸ“ ì„¤ê³„ ì›ì¹™ (Ontology Integrity):                          â•‘
â•‘  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€               â•‘
â•‘  1. Immutability (ë¶ˆë³€ì„±)                                    â•‘
â•‘     - PKëŠ” ê°ì²´ ìƒì„± í›„ ì ˆëŒ€ ë³€ê²½ ë¶ˆê°€í•´ì•¼ í•¨                â•‘
â•‘     - Stringì€ ë¹„ì¦ˆë‹ˆìŠ¤ ì˜ë¯¸ ìˆëŠ” ê°’ ë¶€ì—¬ ê°€ëŠ¥ (EMP-001)     â•‘
â•‘     - Integer autoincrementëŠ” DB ì¬ìƒì„± ì‹œ ë³€ê²½ ìœ„í—˜         â•‘
â•‘                                                              â•‘
â•‘  2. Determinism (ê²°ì •ì„±)                                     â•‘
â•‘     - ë™ì¼ ë°ì´í„° ì…ë ¥ â†’ í•­ìƒ ë™ì¼ PK ìƒì„±                   â•‘
â•‘     - Foundry ë¹Œë“œ ì‹œ PK ë³€ê²½ë˜ë©´:                           â•‘
â•‘       â†’ ê¸°ì¡´ edits ì†ì‹¤                                      â•‘
â•‘       â†’ ì—°ê²°ëœ links ì‚¬ë¼ì§                                  â•‘
â•‘       â†’ íˆìŠ¤í† ë¦¬ ì¶”ì  ë¶ˆê°€                                   â•‘
â•‘                                                              â•‘
â•‘  3. Cross-System Identity (ì‹œìŠ¤í…œ ê°„ ì¼ê´€ì„±)                 â•‘
â•‘     - HR, ERP, ê¸‰ì—¬ ì‹œìŠ¤í…œì—ì„œ ë™ì¼ ì§ì› ID ì‚¬ìš©             â•‘
â•‘     - IntegerëŠ” ì‹œìŠ¤í…œë§ˆë‹¤ ë‹¤ë¥¼ ìˆ˜ ìˆìŒ                      â•‘
â•‘     - String(UUID ë˜ëŠ” ì‚¬ë²ˆ)ì€ ì „ì‚¬ì ìœ¼ë¡œ ì¼ê´€               â•‘
â•‘                                                              â•‘
â•‘  4. Referential Integrity (ì°¸ì¡° ë¬´ê²°ì„±)                      â•‘
â•‘     - employeeIdê°€ ë³€ê²½ë˜ë©´ ëª¨ë“  LinkType ì°¸ì¡° ê¹¨ì§          â•‘
â•‘     - EmployeeToDepartment Linkì˜ ì‹ ë¢°ì„± ë³´ì¥ ë¶ˆê°€           â•‘
â•‘     - ActionType ì´ë ¥ì˜ ì£¼ì²´ ì‹ë³„ ë¶ˆê°€                       â•‘
â•‘                                                              â•‘
â•‘  ğŸ“š Palantir ê³µì‹ ê·¼ê±°:                                      â•‘
â•‘  "Primary keys should be deterministic. If the primary key   â•‘
â•‘   is non-deterministic and changes on build, edits can be    â•‘
â•‘   lost and links may disappear."                             â•‘
â•‘  ğŸ”— https://www.palantir.com/docs/foundry/object-link-types/create-object-type
â•‘                                                              â•‘
â•‘  "An Employee object type may be uniquely identified by a    â•‘
â•‘   string property called employeeId."                        â•‘
â•‘  ğŸ”— https://www.palantir.com/docs/foundry/functions/object-identifiers
â•‘                                                              â•‘
â•‘  ğŸ’¡ ì‹¤ë¬´ ê¶Œì¥ì‚¬í•­:                                            â•‘
â•‘  - ë‚´ë¶€ ì‹œìŠ¤í…œ: ì˜ë¯¸ ìˆëŠ” ì‚¬ë²ˆ (EMP-001, ì§ì›ì½”ë“œ)           â•‘
â•‘  - ì™¸ë¶€ ì—°ë™: UUID v4 (ì¶©ëŒ ë°©ì§€)                            â•‘
â•‘  - ì ˆëŒ€ autoincrement Integer ì‚¬ìš© ê¸ˆì§€                      â•‘
â•‘                                                              â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```

---

## 6. Integration Protocol

### 6.1 ë‹¤ë¥¸ ìŠ¤í‚¬ì—ì„œ í˜¸ì¶œ ì‹œ

```python
# /ontology-objecttypeì˜ L3ì—ì„œ "?" ì§ˆë¬¸ ì²˜ë¦¬
async def handle_user_question(question):
    # "ì™œ" ê´€ë ¨ ì§ˆë¬¸ì¸ì§€ í™•ì¸
    WHY_PATTERNS = [
        r"ì™œ\s+", r"ì´ìœ ", r"ê·¼ê±°", r"ì–´ì§¸ì„œ",
        r"why\s+", r"reason", r"because"
    ]

    if any(re.search(p, question, re.I) for p in WHY_PATTERNS):
        # /ontology-why í˜¸ì¶œ
        return await invoke_helper_skill("ontology-why", {
            "question": question,
            "context": current_analysis_context,
            "type": current_type  # ObjectType, LinkType, etc.
        })
```

### 6.2 í˜¸ì¶œ ê°€ëŠ¥í•œ ìŠ¤í‚¬ ëª©ë¡

| ìŠ¤í‚¬ | í˜¸ì¶œ ì‹œì  |
|------|----------|
| `/ontology-objecttype` | L3ì—ì„œ "?" ì§ˆë¬¸, Property ì„¤ëª… ìš”ì²­ |
| `/ontology-linktype` | Cardinality ì„ íƒ ì´ìœ , êµ¬í˜„ ë°©ì‹ ì§ˆë¬¸ |
| `/ontology-actiontype` | Parameter ì„¤ê³„, hazardous ì„¤ì • ì§ˆë¬¸ |
| `/ontology-core` | ê²€ì¦ ì˜¤ë¥˜ì˜ ê·¼ë³¸ ì›ì¸ ì„¤ëª… |
| (í–¥í›„ ì¶”ê°€) | Interface, ValueType, Automation ë“± |

---

## 7. Tools Allowed

| Tool | Purpose |
|------|---------|
| `Read` | ontology-definition íŒ¨í‚¤ì§€ ì°¸ì¡° |
| `WebSearch` | Palantir ê³µì‹ ë¬¸ì„œ/ì‚¬ë¡€ ê²€ìƒ‰ |
| `WebFetch` | íŠ¹ì • ë¬¸ì„œ ìƒì„¸ ì¡°íšŒ |
| `mcp__context7__query_docs` | ê³µì‹ ë¬¸ì„œ ê²€ìƒ‰ |

---

## 8. Error Handling

| ìƒí™© | ì²˜ë¦¬ |
|------|------|
| ì§ˆë¬¸ ë¶ˆëª…í™• | êµ¬ì²´ì ì¸ ì§ˆë¬¸ ìš”ì²­ |
| ê²€ì¦ëœ ìë£Œ ì—†ìŒ | "ê³µì‹ ë¬¸ì„œì—ì„œ í™•ì¸ëœ ê·¼ê±° ì—†ìŒ" ëª…ì‹œ |
| ë²”ìœ„ ì™¸ ì§ˆë¬¸ | Ontology ê´€ë ¨ ì§ˆë¬¸ìœ¼ë¡œ ìœ ë„ |

---

## 9. Future Enhancement

| ê¸°ëŠ¥ | ì„¤ëª… | ìƒíƒœ |
|------|------|------|
| ë‹¤êµ­ì–´ ì§€ì› | ì˜ì–´/í•œêµ­ì–´ ìë™ ê°ì§€ | ğŸ”œ |
| ëŒ€í™”í˜• ì‹¬í™” | ì¶”ê°€ ì§ˆë¬¸ ì—°ì† ì²˜ë¦¬ | ğŸ”œ |
| ì‹œê°í™” | ê´€ê³„ë„, ì˜í–¥ ë²”ìœ„ ë‹¤ì´ì–´ê·¸ë¨ | ğŸ”œ |

---

**End of Skill Definition**
