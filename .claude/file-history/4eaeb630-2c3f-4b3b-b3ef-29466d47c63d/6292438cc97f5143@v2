# =============================================================================
# Global Context: V2.1.19 Pipeline Compliance Enhancement
# =============================================================================
# Generated by /orchestrate
# Plan Source: .agent/plans/v2.1.19-pipeline-review-20260125.yaml
# =============================================================================

version: "1.0"
project: "v2.1.19-pipeline-compliance"
orchestrator: "Terminal-A"
createdAt: "2026-01-25T15:00:00Z"
lastUpdated: "2026-01-25T15:00:00Z"

# =============================================================================
# OBJECTIVES
# =============================================================================
objectives:
  primary:
    - "/build-research 스킬 문서화 개선 (Error Handling, Examples)"
    - "E2E 파이프라인 통합 테스트 스크립트 작성"
    - "최종 V2.1.19 호환성 검증"

# =============================================================================
# PHASES
# =============================================================================
phases:
  phase2-build-research-docs:
    id: "phase2-build-research-docs"
    name: "Complete /build-research Documentation"
    owner: "terminal-b"
    nativeTaskId: "1"
    status: "pending"
    dependencies: []
    targetFiles:
      - ".claude/skills/build-research/SKILL.md"
    priority: "P2"

  phase4-e2e-test:
    id: "phase4-e2e-test"
    name: "Create E2E Integration Test Script"
    owner: "terminal-c"
    nativeTaskId: "2"
    status: "pending"
    dependencies: []
    targetFiles:
      - ".claude/tests/e2e-pipeline-test.sh"
      - ".claude/tests/README.md"
    priority: "P2"

  phase5-validation:
    id: "phase5-validation"
    name: "Final V2.1.19 Compliance Validation"
    owner: "orchestrator"
    nativeTaskId: "3"
    status: "pending"
    dependencies: ["phase2-build-research-docs", "phase4-e2e-test"]
    targetFiles: []
    priority: "P0"

# =============================================================================
# DEPENDENCY GRAPH
# =============================================================================
dependencyGraph: |
  phase2-build-research-docs (Terminal-B) ──┐
                                            ├──► phase5-validation (Orchestrator)
  phase4-e2e-test (Terminal-C) ────────────┘

  Note: Phase 2 and Phase 4 can run in PARALLEL

# =============================================================================
# PARALLELIZATION
# =============================================================================
parallelization:
  enabled: true
  parallelPhases:
    - ["phase2-build-research-docs", "phase4-e2e-test"]
  sequentialPhases:
    - "phase5-validation"

# =============================================================================
# SHARED RULES
# =============================================================================
sharedRules:
  - "ALWAYS Read target file before modifying"
  - "Update _progress.yaml after completion"
  - "Report in L1/L2/L3 format"
  - "Check blockedBy before starting work"
  - "Use TaskUpdate to mark task as completed"

# =============================================================================
# REFERENCE FILES
# =============================================================================
referenceFiles:
  - path: ".agent/plans/v2.1.19-pipeline-review-20260125.yaml"
    reason: "Planning document with phase details"
  - path: ".agent/research/v2.1.19-pipeline-review-20260125.md"
    reason: "Research findings for context"
  - path: ".claude/skills/build/SKILL.md"
    reason: "Error Handling section pattern (line 347)"
  - path: ".claude/skills/docx-automation/SKILL.md"
    reason: "Examples section pattern (line 177)"

# =============================================================================
# AUTONOMOUS EXECUTION PROTOCOL
# =============================================================================
autonomousProtocol:
  enabled: true
  pollIntervalSeconds: 30

  executionLoop: |
    WHILE project NOT completed:
      1. TaskList() → 전체 Task 상태 확인
      2. Filter by owner == MY_TERMINAL
      3. FOR each myTask:
           IF myTask.status == "pending":
             IF myTask.blockedBy ALL completed:
               → TaskUpdate(taskId, status="in_progress")
               → Execute task
               → TaskUpdate(taskId, status="completed")
             ELSE:
               → Log "Waiting for blockers: {blockedBy}"
      4. IF all myTasks completed:
           → Report final status
      5. Sleep(pollIntervalSeconds)

  completionDetection:
    projectComplete: "All tasks have status='completed'"
    terminalComplete: "All tasks with owner=MY_TERMINAL have status='completed'"

# =============================================================================
# END OF CONTEXT
# =============================================================================
