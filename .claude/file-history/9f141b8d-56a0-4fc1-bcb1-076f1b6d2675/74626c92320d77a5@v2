# /build Command - Unified System Component Builder

> **Version:** 3.0.0 | **Type:** Cascading Interactive Builder
> **Scope:** Agent, Skill, Hook creation with dependency chaining
> **Claude Code Compatibility:** V2.1.15+

---

## Purpose

Create new system components through **Cascading Build** - a hierarchical Q&A workflow that automatically prompts for related components:

```
Agent Build  â†’  Skills?  â†’  Hooks?
Skill Build  â†’  Hooks?
Hook Build   â†’  (standalone)
```

## Usage

```bash
/build                    # Start interactive builder (type selection)
/build agent              # Full cascade: Agent â†’ Skills â†’ Hooks
/build skill              # Partial cascade: Skill â†’ Hooks
/build hook               # Single component: Hook only
/build --resume <name>    # Resume incomplete draft
/build --standalone       # Disable cascade (single component only)
```

## Arguments

- `$ARGUMENTS` - Optional: component type, flags, or --resume

---

## Cascading Build Architecture

### Component Hierarchy

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  AGENT (Top-Level)                                           â”‚
â”‚  - Has: tools, model, permissions                            â”‚
â”‚  - Uses: Skills (for workflows)                              â”‚
â”‚  - Triggers: Hooks (for events)                              â”‚
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  SKILL (Mid-Level)                                     â”‚ â”‚
â”‚  â”‚  - Invoked by: Agent or User (/command)                â”‚ â”‚
â”‚  â”‚  - Has: allowed-tools, context                         â”‚ â”‚
â”‚  â”‚  - Triggers: Hooks (PreToolUse, PostToolUse)           â”‚ â”‚
â”‚  â”‚                                                        â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚  â”‚  â”‚  HOOK (Bottom-Level)                             â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  - Standalone event handler                      â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  - Attached to: Agent, Skill, or Global          â”‚ â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Build Flow Comparison

| Command | Components Created | Cascade Depth |
|---------|-------------------|---------------|
| `/build agent` | Agent + Skills + Hooks | 3 levels |
| `/build skill` | Skill + Hooks | 2 levels |
| `/build hook` | Hook only | 1 level |
| `/build agent --standalone` | Agent only | 1 level |

---

## Execution Flow

### Phase 1: Type Selection

```python
AskUserQuestion(
  questions=[{
    "question": "ì–´ë–¤ ì»´í¬ë„ŒíŠ¸ë¥¼ ìƒì„±í•˜ì‹œê² ìŠµë‹ˆê¹Œ?",
    "header": "Component",
    "options": [
      {"label": "Agent (Full)", "description": "Agent + Skills + Hooks ì „ì²´ ìƒì„±"},
      {"label": "Skill (+ Hooks)", "description": "Skill + ì—°ê²°ëœ Hooks ìƒì„±"},
      {"label": "Hook (Single)", "description": "Hook ë‹¨ë… ìƒì„±"}
    ],
    "multiSelect": false
  }]
)
```

### Phase 2: Primary Component Q&A

Based on selection, complete the primary component's Q&A rounds.

### Phase 3: Cascade Prompts (Agent/Skill only)

```python
# After Agent Q&A completion
AskUserQuestion(
  questions=[{
    "question": f"'{agent_name}' Agentì— ì „ìš© Skillsë¥¼ ì¶”ê°€í•˜ì‹œê² ìŠµë‹ˆê¹Œ?",
    "header": "Add Skills",
    "options": [
      {"label": "ì˜ˆ, Skills ì¶”ê°€", "description": "ì´ Agentê°€ ì‚¬ìš©í•  Skills ì •ì˜"},
      {"label": "ê¸°ì¡´ Skill ì—°ê²°", "description": "ì´ë¯¸ ìˆëŠ” Skillì„ ì—°ê²°"},
      {"label": "ì•„ë‹ˆì˜¤, ê±´ë„ˆë›°ê¸°", "description": "Skills ì—†ì´ ì§„í–‰"}
    ],
    "multiSelect": false
  }]
)

# After each Skill Q&A (or Agent if no Skills)
AskUserQuestion(
  questions=[{
    "question": f"'{component_name}'ì— Hooksë¥¼ ì¶”ê°€í•˜ì‹œê² ìŠµë‹ˆê¹Œ?",
    "header": "Add Hooks",
    "options": [
      {"label": "ì˜ˆ, Hooks ì¶”ê°€", "description": "ì´ë²¤íŠ¸ ê¸°ë°˜ í›… ì •ì˜"},
      {"label": "ì•„ë‹ˆì˜¤, ì™„ë£Œ", "description": "ì»´í¬ë„ŒíŠ¸ ìƒì„± ì™„ë£Œ"}
    ],
    "multiSelect": false
  }]
)
```

### Phase 4: Nested Component Q&A

If user chooses to add Skills/Hooks, run their respective Q&A rounds.

### Phase 5: Draft Generation & Confirmation

Generate all components as a bundle, show preview, confirm.

### Phase 6: File Generation

Create all files with proper cross-references.

---

## Q&A Pattern References

### Agent (15 Rounds + Cascade)

| Category | Rounds | Fields |
|----------|--------|--------|
| Core Identity | 1-3 | name, description, disable-model-invocation |
| Tool Config | 4-6 | tools, disallowedTools, mcp_tools |
| Context | 7-9 | model, context, permissionMode |
| Integration | 10-12 | skills[], hooks[], customInstructions |
| Advanced | 13-15 | maxTurns, timeout, v21x_features |
| **Cascade** | 16+ | â†’ Skill Q&A (if selected) â†’ Hook Q&A |

**Agent Fields Reference:**
```yaml
# Core (Required)
name: string              # Unique agent identifier
description: string       # What this agent does

# Tools
tools: string[]           # Allowed tools
disallowedTools: string[] # Denied tools
mcp_tools: string[]       # MCP server tools

# Execution
model: enum               # sonnet | opus | haiku
context: enum             # standard | fork
permissionMode: enum      # auto | confirm | deny

# Integration (Cascade References)
skills: string[]          # Skills this agent uses (built in cascade)
hooks:                    # Hooks attached to this agent
  PreToolUse: string[]
  PostToolUse: string[]
  SubagentStart: string[]
  SubagentStop: string[]

# Optional
disable-model-invocation: bool
maxTurns: number
customInstructions: string
```

### Skill (13 Rounds + Cascade)

| Category | Rounds | Fields |
|----------|--------|--------|
| Identity | 1-3 | name, description, user-invocable |
| Execution | 4-6 | context, agent, model |
| Tools | 7-9 | allowed-tools, argument-hint |
| Control | 10-11 | disable-model-invocation, once |
| Features | 12-13 | content-type, ultrathink |
| **Cascade** | 14+ | â†’ Hook Q&A (if selected) |

**Skill Fields Reference:**
```yaml
# Core (Required)
name: string              # /name command
description: string       # Displayed in list

# Execution
user-invocable: bool      # Direct user invocation?
context: enum             # standard | fork
agent: string             # Agent for context: fork
model: enum               # sonnet | opus | haiku

# Tools
allowed-tools: string[]   # Available tools
argument-hint: string     # Autocomplete hint

# Control (V2.1.x+)
disable-model-invocation: bool
once: bool

# Integration (Cascade References)
parent_agent: string      # If created via Agent cascade
hooks:                    # Hooks attached to this skill
  PreToolUse: string[]
  PostToolUse: string[]
```

### Hook (16 Rounds - No Cascade)

| Category | Rounds | Fields |
|----------|--------|--------|
| Identity | 1-3 | name, event-type, language |
| Trigger | 4-6 | matcher, timeout, type |
| Input/Output | 7-10 | permission, updatedInput, additionalContext |
| Output Schema | 11-13 | output-fields, blocking, json-schema |
| Advanced | 14-16 | env-vars, logging, once |

**Hook Event Types (12 Total):**

| Event Type | Trigger Point | Attachable To |
|------------|---------------|---------------|
| `SessionStart` | Session begins | Global |
| `SessionEnd` | Session ends | Global |
| `Setup` | Repository init | Global |
| `UserPromptSubmit` | User sends prompt | Global |
| `PreToolUse` | Before tool | Agent, Skill, Global |
| `PostToolUse` | After tool success | Agent, Skill, Global |
| `PostToolUseFailure` | After tool failure | Agent, Skill, Global |
| `PermissionRequest` | Permission prompt | Global |
| `PreCompact` | Before compact | Global |
| `Notification` | System notification | Global |
| `SubagentStart` | Subagent begins | Agent |
| `SubagentStop` | Subagent ends | Agent |
| `Stop` | Session stops | Global |

**Hook Type (V2.1.x+):**

| Type | Description | Language |
|------|-------------|----------|
| `command` | Shell execution | bash, python, node |
| `prompt` | LLM evaluation | N/A (uses model) |

**Hook Fields Reference:**
```yaml
# Identity
name: string
event: enum               # 12 event types

# Trigger
matcher: string           # Regex pattern
timeout: number           # ms (default: 60000)
type: enum                # command | prompt

# For type: command
command: string
language: enum            # bash | python | node

# For type: prompt (V2.1.x+)
prompt: string

# Output (JSON)
output_schema:
  continue: bool
  stopReason: string
  suppressOutput: bool
  systemMessage: string
  permissionDecision: enum # allow | deny | ask
  additionalContext: string
  updatedInput: object

# Control
blocking: bool
once: bool

# Integration (Cascade Reference)
attached_to:
  type: enum              # agent | skill | global
  name: string            # Parent component name
```

---

## Cascade Examples

### Example 1: Full Agent Cascade

```
/build agent

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ”§ AGENT Q&A (15 rounds)
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
â†’ Q1: "code-reviewer"
â†’ Q2: "Reviews code changes for quality and security"
â†’ Q4: [Read, Grep, Glob, Task]
â†’ Q7: "sonnet"
â†’ ...
â†’ Q15: Complete

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ“¦ CASCADE: Add Skills to 'code-reviewer'?
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
â†’ User: "ì˜ˆ, Skills ì¶”ê°€"

  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ ğŸ”§ SKILL Q&A #1 (13 rounds)                    â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
  â”‚ â†’ Q1: "quick-review"                           â”‚
  â”‚ â†’ Q2: "Fast code review for small changes"     â”‚
  â”‚ â†’ Q3: user-invocable: true                     â”‚
  â”‚ â†’ ...                                          â”‚
  â”‚                                                â”‚
  â”‚ ğŸ“¦ CASCADE: Add Hooks to 'quick-review'?       â”‚
  â”‚ â†’ User: "ì˜ˆ, Hooks ì¶”ê°€"                        â”‚
  â”‚                                                â”‚
  â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
  â”‚   â”‚ ğŸ”§ HOOK Q&A (16 rounds)                  â”‚ â”‚
  â”‚   â”‚ â†’ Q1: "review-logger"                    â”‚ â”‚
  â”‚   â”‚ â†’ Q2: "PostToolUse"                      â”‚ â”‚
  â”‚   â”‚ â†’ Q6: "command"                          â”‚ â”‚
  â”‚   â”‚ â†’ ...                                    â”‚ â”‚
  â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
  â”‚                                                â”‚
  â”‚ ğŸ“¦ Add another Hook? â†’ "ì•„ë‹ˆì˜¤"                 â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ğŸ“¦ Add another Skill? â†’ "ì˜ˆ"

  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ ğŸ”§ SKILL Q&A #2 (13 rounds)                    â”‚
  â”‚ â†’ Q1: "deep-review"                            â”‚
  â”‚ â†’ ...                                          â”‚
  â”‚ ğŸ“¦ Add Hooks? â†’ "ì•„ë‹ˆì˜¤"                        â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ğŸ“¦ Add another Skill? â†’ "ì•„ë‹ˆì˜¤"

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ“¦ CASCADE: Add Agent-Level Hooks?
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
â†’ User: "ì˜ˆ, Hooks ì¶”ê°€"

  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ ğŸ”§ HOOK Q&A (16 rounds)                        â”‚
  â”‚ â†’ Q1: "agent-monitor"                          â”‚
  â”‚ â†’ Q2: "SubagentStart"                          â”‚
  â”‚ â†’ ...                                          â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
âœ… BUILD COMPLETE - Preview
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

Generated Components:
â”œâ”€â”€ Agent: code-reviewer
â”‚   â”œâ”€â”€ Skill: quick-review
â”‚   â”‚   â””â”€â”€ Hook: review-logger (PostToolUse)
â”‚   â”œâ”€â”€ Skill: deep-review
â”‚   â””â”€â”€ Hook: agent-monitor (SubagentStart)

Files to create:
â”œâ”€â”€ .claude/agents/code-reviewer.md
â”œâ”€â”€ .claude/skills/quick-review.md
â”œâ”€â”€ .claude/skills/deep-review.md
â”œâ”€â”€ .claude/hooks/code-reviewer/review-logger.py
â””â”€â”€ .claude/hooks/code-reviewer/agent-monitor.py

Confirm? [Y/n]
```

### Example 2: Skill with Hooks

```
/build skill

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ”§ SKILL Q&A (13 rounds)
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
â†’ Q1: "secure-deploy"
â†’ Q2: "Secure deployment workflow"
â†’ ...

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ“¦ CASCADE: Add Hooks to 'secure-deploy'?
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
â†’ User: "ì˜ˆ"

  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ ğŸ”§ HOOK Q&A #1: PreToolUse validator           â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ ğŸ”§ HOOK Q&A #2: PostToolUse logger             â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Generated:
â”œâ”€â”€ Skill: secure-deploy
â”‚   â”œâ”€â”€ Hook: deploy-validator (PreToolUse)
â”‚   â””â”€â”€ Hook: deploy-logger (PostToolUse)
```

### Example 3: Standalone Hook

```
/build hook

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ”§ HOOK Q&A (16 rounds)
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
â†’ Q1: "global-audit"
â†’ Q2: "PostToolUse"
â†’ Q3: "Python"
â†’ ...

Generated:
â””â”€â”€ Hook: global-audit (PostToolUse) - Global scope
```

---

## Output Locations

| Component | Path Pattern |
|-----------|--------------|
| Agent | `.claude/agents/{name}.md` |
| Skill | `.claude/skills/{name}.md` |
| Hook (Agent-attached) | `.claude/hooks/{agent_name}/{hook_name}.{ext}` |
| Hook (Skill-attached) | `.claude/hooks/{skill_name}/{hook_name}.{ext}` |
| Hook (Global) | `.claude/hooks/global/{hook_name}.{ext}` |
| Draft | `.agent/plans/create_drafts/{type}_{name}.md` |

---

## Cross-Reference Generation

When cascade completes, files include proper references:

**Agent file includes:**
```yaml
# .claude/agents/code-reviewer.md
skills:
  - quick-review
  - deep-review
hooks:
  SubagentStart:
    - .claude/hooks/code-reviewer/agent-monitor.py
```

**Skill file includes:**
```yaml
# .claude/skills/quick-review.md
parent_agent: code-reviewer  # If created via cascade
hooks:
  PostToolUse:
    - .claude/hooks/quick-review/review-logger.py
```

**Hook file includes:**
```python
# .claude/hooks/code-reviewer/agent-monitor.py
# Attached to: Agent/code-reviewer
# Event: SubagentStart
```

---

## V2.1.x+ Features

### Prompt-based Hooks
```yaml
type: prompt
prompt: |
  Evaluate if this code change follows security guidelines.
  Return: {"continue": true/false, "reason": "..."}
```

### PostToolUseFailure Event
```yaml
event: PostToolUseFailure
matcher: "Bash"
command: "python handle_failure.py"
```

### once Flag
```yaml
once: true  # Run only once per session
```

---

## Flags

| Flag | Description |
|------|-------------|
| `--standalone` | Disable cascade, create single component |
| `--resume <name>` | Resume incomplete draft |
| `--dry-run` | Preview without creating files |
| `--template <path>` | Use custom template |

---

## Notes

- All Q&A can be skipped with defaults
- Draft auto-saves after each round
- Cascade can be cancelled at any prompt
- Use `--standalone` for single component creation
- Cross-references are automatically maintained
- V2.1.15+ features fully supported
