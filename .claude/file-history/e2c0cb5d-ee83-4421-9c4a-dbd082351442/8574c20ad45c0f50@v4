---
name: explore-l1l2l3
description: |
  Explore codebase with Progressive Disclosure L1/L2/L3 output format.
  Analyze code structure, find patterns, and discover files efficiently.
  Returns token-efficient summaries with lazy-loading detail sections.
  Use when asking about codebase structure, file locations, or code patterns.
user-invocable: true
mode: true
context: fork
agent: Explore
model: sonnet
argument-hint: [query]
allowed-tools: Read, Grep, Glob
version: "1.1.0"
---

# /explore-l1l2l3 Skill - Codebase Exploration with L1/L2/L3 Output

---

## Purpose

Explore codebase with Progressive Disclosure L1/L2/L3 output format.
Ensures consistent, token-efficient output for Main Agent consumption.

---

## Task

$ARGUMENTS

---

## Output Requirements

You MUST output in L1/L2/L3 format.

### L1 Summary (stdout, â‰¤500 tokens)

Return this YAML block as your primary output:

```yaml
taskId: {8-char-id}
agentType: Explore
summary: "1-2 sentence finding"
status: success | partial | failed
priority: CRITICAL | HIGH | MEDIUM | LOW
recommendedRead:
  - anchor: "#section-name"
    reason: "why read this"
l2Index:
  - anchor: "#section-name"
    tokens: {number}
    priority: CRITICAL | HIGH | MEDIUM | LOW
    description: "what this contains"
l2Path: .agent/outputs/Explore/{taskId}.md
requiresL2Read: true | false
nextActionHint: "suggested next step"
```

### L2/L3 Detail File

Write detailed findings to: `.agent/outputs/Explore/{taskId}.md`

Format each section with anchors:

```markdown
## Section Name {#section-name}
<!-- ~{tokens} tokens -->

Detailed content here...

## Another Section {#another-section}
<!-- ~{tokens} tokens -->

More detailed content...
```

---

## Execution Flow

1. **Generate taskId**: 8-character unique ID (e.g., `exp-a1b2`)
2. **Create output directory**: `.agent/outputs/Explore/` if not exists
3. **Explore codebase**: Use Glob, Grep, Read tools
4. **Write L3 detail file**: `.agent/outputs/Explore/{taskId}.md`
5. **Return L1 summary**: YAML block with l2Index pointing to sections

---

## Priority Guidelines

| Priority | When to Use |
|----------|-------------|
| CRITICAL | Security issues, breaking changes, blockers |
| HIGH | Important findings affecting architecture |
| MEDIUM | Standard findings, patterns, structures |
| LOW | Minor details, nice-to-know information |

---

## Example Output

### L1 Summary (stdout)
```yaml
taskId: exp-7f8a
agentType: Explore
summary: "Found 3 hook files handling progressive disclosure in .claude/hooks/"
status: success
priority: MEDIUM
recommendedRead:
  - anchor: "#hook-architecture"
    reason: "explains the hook chain flow"
l2Index:
  - anchor: "#hook-architecture"
    tokens: 450
    priority: HIGH
    description: "Hook chain and execution order"
  - anchor: "#file-list"
    tokens: 200
    priority: MEDIUM
    description: "List of discovered hook files"
  - anchor: "#recommendations"
    tokens: 300
    priority: LOW
    description: "Suggested improvements"
l2Path: .agent/outputs/Explore/exp-7f8a.md
requiresL2Read: true
nextActionHint: "Read #hook-architecture for implementation details"
```

### L3 Detail File (.agent/outputs/Explore/exp-7f8a.md)
```markdown
## Hook Architecture {#hook-architecture}
<!-- ~450 tokens -->

The progressive disclosure system uses three hooks:
1. pd-inject.sh - Injects L1/L2/L3 format instructions
2. pd-pretooluse.sh - Validates tool inputs
3. pd-posttooluse.sh - Processes tool outputs

## File List {#file-list}
<!-- ~200 tokens -->

| File | Purpose |
|------|---------|
| pd-inject.sh | Format injection |
| pd-pretooluse.sh | Pre-tool validation |
| pd-posttooluse.sh | Post-tool processing |

## Recommendations {#recommendations}
<!-- ~300 tokens -->

Consider adding caching for repeated queries.
```

---

## Tools Allowed

- Read
- Grep
- Glob
- Bash (read-only commands)

---

## Notes

- Always create the L3 detail file BEFORE returning L1 summary
- Use descriptive anchors that match section content
- Estimate token counts accurately (helps Main Agent decide what to read)
- Set `requiresL2Read: false` if L1 summary is sufficient
