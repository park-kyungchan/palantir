---
name: worker
description: |
  Multi-terminal worker management with lifecycle control.
  Subcommands: start, task, done for Terminal B, C, or D.
  Use for parallel task execution in multi-terminal orchestration.
  Examples: /worker start b, /worker done c "completed analysis"
user-invocable: true
disable-model-invocation: true
argument-hint: [start|task|done] [terminal: b|c|d] [args...]
model: opus
allowed-tools:
  - Read
  - Grep
  - Glob
  - Edit
  - Write
  - Bash
version: "2.0.0"
---

# Worker - Multi-Terminal Task Management

> **Version:** 2.0.0 | **Consolidates:** worker-start, worker-task, worker-done

---

## Usage

```bash
/worker start <terminal>        # Initialize worker with assigned task
/worker task <task-file>        # Execute specific task file
/worker done <terminal> [summary]  # Report completion
```

## Arguments

- **Subcommand:** $0 (start | task | done)
- **Terminal/File:** $1 (b, c, d for terminal; or file path for task)
- **Additional:** $2 (summary for done subcommand)

---

## Subcommand: start

Initialize worker terminal and load assigned task.

### Protocol

1. **Load Context**
   - Read `.agent/prompts/_context.yaml` for global context
   - Read `.agent/prompts/_progress.yaml` for current status

2. **Load Task File**
   - Find `worker-{terminal}-task.yaml` in pending/
   - Parse task steps and deliverables

3. **Execute Steps**
   - Follow task instructions sequentially
   - Update progress after each step

---

## Subcommand: task

Execute a specific task file directly.

### Protocol

1. **Read Task File**
   ```bash
   cat $1  # Task file path
   ```

2. **Parse YAML Structure**
   - Extract `steps[]` array
   - Check `dependencies[]`
   - Note `deliverables[]`

3. **Execute**
   - Complete each step
   - Generate deliverables
   - Report via `/worker done`

---

## Subcommand: done

Report task completion to Orchestrator.

### Protocol

1. **Update Progress**
   - Set terminal status to "completed"
   - Add completion timestamp

2. **Move Task File**
   ```bash
   mv .agent/prompts/pending/worker-{terminal}-task.yaml \
      .agent/prompts/completed/
   ```

3. **Generate L1 Report**
   ```yaml
   terminal: $1
   status: completed
   summary: "$2"
   completedAt: $(date -Iseconds)
   ```

---

## Context Files

| File | Purpose |
|------|---------|
| `_context.yaml` | Global project context |
| `_progress.yaml` | Real-time progress tracker |
| `worker-{x}-task.yaml` | Terminal-specific task |

---

## Example Workflow

```bash
# Terminal-A (Orchestrator)
/orchestrate "Implement feature X"
/assign b "Setup database schema"
/assign c "Create API endpoints"

# Terminal-B
/worker start b
# ... execute task ...
/worker done b "Schema created with migrations"

# Terminal-C
/worker start c
# ... execute task ...
/worker done c "REST endpoints implemented"

# Terminal-A
/collect
```
