# Ontology-Definition 품질 72% → 95% 고도화

> **Version:** 1.0 | **Status:** IN_PROGRESS | **Date:** 2026-01-17
> **Auto-Compact Safe:** This file persists across context compaction

## Overview

| Item | Value |
|------|-------|
| Current Quality | 72% |
| Target Quality | 95% |
| Complexity | medium |
| Total Tasks | 7 |
| Files Affected | ~10 |
| Estimated Effort | 9.5 hours |

## Requirements

**Primary Goal:** Ontology-Definition 품질을 72%에서 95%로 향상
**Key Gap:** 테스트 커버리지 (validation/, security/, constraints/ - 0% 테스트)

### Modules Requiring Tests

| Module | Exports | Test Status | Priority |
|--------|---------|-------------|----------|
| validation/ | 20 exports | 0% | HIGH |
| security/ | 9 exports | 0% | HIGH |
| constraints/ | 9 exports | 0% | HIGH |

### Current Test Coverage

| Test File | Status | Methods |
|-----------|--------|---------|
| test_core_types.py | ✅ | ~30 |
| test_export.py | ✅ | ~25 |
| test_import.py | ✅ | ~30 |
| test_registry.py | ✅ | ~30 |
| test_validation.py | ❌ MISSING | 0 |
| test_security.py | ❌ MISSING | 0 |
| test_constraints.py | ❌ MISSING | 0 |

## Tasks

| # | Phase | Task | Status | Est. LOC | Coverage Impact |
|---|-------|------|--------|----------|-----------------|
| 1 | P1 | test_validation.py 생성 | PENDING | ~400 | +15% |
| 2 | P1 | test_security.py 생성 | PENDING | ~350 | +10% |
| 3 | P1 | test_constraints.py 생성 | PENDING | ~300 | +8% |
| 4 | P2 | ValueType/StructType 테스트 추가 | PENDING | ~250 | +5% |
| 5 | P3 | ODA Integration Bridge 구축 | PENDING | ~500 | +7% |
| 6 | Final | E2E 검증 | PENDING | - | - |
| 7 | Final | 품질 게이트 통과 | PENDING | - | - |

## Progress Tracking

| Phase | Tasks | Completed | Status |
|-------|-------|-----------|--------|
| Phase 1 (Test Coverage) | 3 | 0 | PENDING |
| Phase 2 (ValueType/Struct) | 1 | 0 | PENDING |
| Phase 3 (ODA Bridge) | 1 | 0 | PENDING |
| Final | 2 | 0 | PENDING |

## Quick Resume After Auto-Compact

If context is compacted, resume by:

1. Read this file: `.agent/plans/ontology_quality_95.md`
2. Check TodoWrite for current task status
3. Continue from first PENDING task in sequence
4. Use subagent delegation pattern from "Execution Strategy" section

## Execution Strategy

### Parallel Execution Groups

**Group A (Can run in parallel):**
- test_validation.py
- test_security.py
- test_constraints.py

**Group B (Sequential after Group A):**
- ValueType/StructType tests
- ODA Integration Bridge

**Group C (Final verification):**
- E2E verification
- Quality gate pass

### Subagent Delegation

| Task Group | Subagent Type | Context | Budget |
|------------|---------------|---------|--------|
| Test file creation | general-purpose | fork | 15K |
| Code analysis | Explore | fork | 5K |
| Integration design | Plan | fork | 10K |

## Critical File Paths

```yaml
target_module: /home/palantir/park-kyungchan/palantir/Ontology-Definition
tests_dir: /home/palantir/park-kyungchan/palantir/Ontology-Definition/tests
validation_module: ontology_definition/validation/
security_module: ontology_definition/security/
constraints_module: ontology_definition/constraints/
```

## Test File Templates

### test_validation.py Structure
```python
# Tests for SchemaValidator, CrossRefValidator, RuntimeValidator
# - test_schema_validator_object_type()
# - test_schema_validator_link_type()
# - test_cross_ref_validator()
# - test_runtime_validator()
# - test_validate_all()
# - test_edge_cases()
```

### test_security.py Structure
```python
# Tests for RestrictedViewPolicy (GAP-001)
# - test_restricted_view_policy_creation()
# - test_policy_term_combinations()
# - test_common_restricted_view_policies()
# - test_access_level_hierarchy()
# - test_security_config()
```

### test_constraints.py Structure
```python
# Tests for PropertyConstraints, MandatoryControlConfig (GAP-002)
# - test_property_constraints_basic()
# - test_numeric_constraints()
# - test_string_constraints()
# - test_array_constraints()
# - test_mandatory_control_config()
# - test_constraint_interactions()
```

## Agent Registry (Auto-Compact Resume)

| Task | Agent ID | Status | Resume Eligible |
|------|----------|--------|-----------------|
| Plan Analysis | TBD | pending | - |
| Test Generation | TBD | pending | - |

## Quality Gates

- [ ] All tests pass
- [ ] Coverage >= 85%
- [ ] Type hints complete
- [ ] Documentation updated

---

*Generated by ODA /plan command*
*V2.1.10 Progressive-Disclosure Native*
