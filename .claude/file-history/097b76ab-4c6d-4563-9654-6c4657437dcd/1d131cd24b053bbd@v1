{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "metadata": {
    "extracted_at": "2026-01-17T09:30:00Z",
    "sources": [
      {
        "file": "Palantir-AIP-Foundry-Architecture-Deep-Research.docx",
        "total_chars": 116997,
        "type": "primary"
      },
      {
        "file": "Review_of_Ontology_Specification_Palantir__Foundry_Alignment.docx",
        "total_chars": 66023,
        "type": "primary"
      }
    ]
  },
  "ontology_core": {
    "ontology": {
      "canonical": "Ontology",
      "aliases": ["Foundry Ontology", "Ontology schema", "digital twin"],
      "definition": "The entire set of Ontology definitions in Foundry, representing a digital twin of enterprise data",
      "key_facts": [
        "One Foundry instance has a base Ontology",
        "Multiple project-specific Ontologies possible",
        "JSON export format with top-level 'ontology' key",
        "Contains objectTypes, linkTypes, actionTypes, interfaces"
      ]
    },
    "ontology_service": {
      "versions": ["OSv1 (legacy)", "OSv2 (current)"],
      "osv2_improvements": ["performance", "MDO support", "better storage"]
    },
    "ontology_proposal": {
      "definition": "Workflow for proposing changes to Ontology that require approval",
      "states": ["draft", "pending", "approved", "rejected"],
      "required_for": "Non-Owner changes to Ontology"
    },
    "identifiers": {
      "rid": {
        "definition": "Resource ID - global unique identifier",
        "format": "ri.ontology.main.object.<ObjectType>:<PrimaryKey>",
        "auto_generated": true
      },
      "api_name": {
        "definition": "Programmatic identifier (no spaces, immutable once active)",
        "constraints": ["no_spaces", "no_special_chars", "immutable_when_active"]
      },
      "display_name": {
        "definition": "Human-friendly UI name",
        "constraints": ["allows_spaces", "allows_uppercase", "mutable"]
      }
    },
    "status_lifecycle": {
      "statuses": ["Active", "Experimental", "Deprecated", "Example"],
      "special_statuses": {
        "endorsed": {
          "applies_to": ["ObjectType"],
          "not_applies_to": ["LinkType", "Property", "ActionType"],
          "set_by": "Ontology Owner only",
          "purpose": "Mark trustworthy object types"
        }
      },
      "constraints": {
        "active": "Cannot delete, must deprecate first",
        "deprecated": "Marked for removal",
        "experimental": "Under development"
      }
    }
  },
  "object_type": {
    "canonical": "Object type",
    "aliases": ["ObjectType", "object types", "객체 타입"],
    "definition": "Schema definition of a real-world entity or event",
    "official_quote": "An object type is the schema definition of a real-world entity or event",
    "components": {
      "primary_key": {
        "definition": "Property that uniquely identifies each Object instance",
        "required": true,
        "maps_to": "backing dataset key column"
      },
      "properties": {
        "definition": "List of Property definitions for this type",
        "each_has": ["name", "data_type", "constraints"]
      },
      "backing_dataset": {
        "definition": "Foundry Dataset where Object data is stored",
        "supports": ["single_dataset", "multi_dataset (MDO)"]
      }
    },
    "relationships": {
      "to_object": "Object is an instance of ObjectType (like row to table)",
      "to_link_type": "Can be source or target of LinkType",
      "to_action_type": "Can be subject of ActionType mutations",
      "to_interface": "Can implement multiple Interfaces"
    },
    "best_practices": [
      "Not too broad (avoid generic 'Entity' type)",
      "Not too narrow (avoid per-instance types)",
      "Clear primary key selection",
      "Meaningful property naming"
    ]
  },
  "link_type": {
    "canonical": "Link type",
    "aliases": ["LinkType", "link types", "relation (legacy)", "링크 타입"],
    "definition": "Schema definition of a relationship between two object types",
    "official_quote": "A link type is the schema definition of a relationship between two object types",
    "components": {
      "source_object_type": "ObjectType on the 'from' side",
      "target_object_type": "ObjectType on the 'to' side",
      "cardinality": {
        "options": ["one-to-one", "one-to-many", "many-to-one", "many-to-many"],
        "implementation": {
          "many-to-many": "Requires backing dataset (junction table)",
          "others": "Uses foreign key property on one side"
        }
      },
      "foreign_key": {
        "definition": "Property on one ObjectType that references another's primary key",
        "required_for": ["one-to-one", "one-to-many", "many-to-one"]
      },
      "backing_table": {
        "required_for": "many-to-many only",
        "columns": ["source_pk", "target_pk", "link_properties (optional)"]
      }
    },
    "features": {
      "bidirectional_navigation": true,
      "link_merging": "Remove duplicate links from multiple sources",
      "cascade_behavior": "Links auto-deleted when Object deleted"
    }
  },
  "action_type": {
    "canonical": "Action type",
    "aliases": ["ActionType", "action types", "Ontology action", "액션 타입"],
    "definition": "Schema definition of a set of changes or edits to objects, property values, and links",
    "official_quote": "An action type is the schema definition of a set of changes or edits to objects, property values, and links that a user can take at once",
    "components": {
      "parameters": {
        "definition": "User inputs for the action",
        "types": ["string", "number", "boolean", "object_picker", "array"]
      },
      "rules": {
        "definition": "Declarative edit operations",
        "operations": ["create_object", "modify_object", "delete_object", "create_link", "delete_link", "modify_property"]
      },
      "submission_criteria": {
        "definition": "Boolean conditions that must be true to submit action",
        "validates": ["parameters", "object_state", "permissions"]
      },
      "side_effects": {
        "definition": "Post-execution effects",
        "types": {
          "notification": "Send message to users",
          "webhook": "Call external HTTP endpoint"
        }
      }
    },
    "variants": {
      "function_backed_action": "Logic implemented in TypeScript/Python function",
      "inline_edit": "UI direct property edit (hidden action)"
    },
    "tracking": {
      "action_log": "Records who/what/when for each action execution",
      "undo_revert": "Rollback recent actions"
    }
  },
  "property": {
    "canonical": "Property",
    "aliases": ["Properties", "object property", "attribute", "속성"],
    "definition": "Schema definition of a characteristic of a real-world entity or event",
    "official_quote": "A property of an object type is the schema definition of a characteristic of a real-world entity or event",
    "components": {
      "name": "Unique identifier within ObjectType",
      "data_type": "Base type or Value type",
      "constraints": "Validation rules"
    },
    "base_types": [
      "string", "integer", "long", "float", "double",
      "boolean", "date", "timestamp", "datetime",
      "array", "struct", "geopoint", "geoshape",
      "timeseries", "media_reference", "vector"
    ],
    "constraint_types": {
      "required": "Cannot be null/empty",
      "enum": "One of allowed values",
      "range": "Min/max numeric or length",
      "regex": "Pattern match for strings",
      "rid_uuid": "Must be valid RID or UUID format",
      "uniqueness": "Array elements must be unique",
      "nested": "Apply ValueType to array/struct elements"
    },
    "special_properties": {
      "edit_only": {
        "definition": "Not populated from dataset, only via user edits",
        "has_backing_column": false
      },
      "mandatory_control": {
        "definition": "Security property requiring explicit user assignment",
        "purpose": "Row-level security markings",
        "constraints": ["no_default_value", "required"],
        "foundry_security_context": "Used with Object Security Policies"
      },
      "derived": {
        "definition": "Computed in real-time by function/expression",
        "aliases": ["computed_property"]
      },
      "shared": {
        "definition": "Property definition reusable across multiple ObjectTypes",
        "purpose": "Consistency and reusability"
      }
    }
  },
  "interface": {
    "canonical": "Interface",
    "aliases": ["InterfaceType", "인터페이스"],
    "definition": "Abstract Ontology type defining common properties and actions for multiple ObjectTypes",
    "features": {
      "polymorphism": "ObjectTypes can implement multiple interfaces",
      "enforcement": "Implementers must have interface's properties",
      "interface_actions": "Define actions at interface level"
    },
    "status": "OSv2 / Beta feature"
  },
  "struct": {
    "canonical": "Struct",
    "aliases": ["Struct type", "구조체"],
    "definition": "User-defined complex data type with multiple fields",
    "use_case": "Reusable nested structure for properties (e.g., Address)",
    "fields": "Each field has name and type"
  },
  "value_type": {
    "canonical": "Value type",
    "aliases": ["ValueType", "custom type"],
    "definition": "User-defined type derived from base type with constraints",
    "components": {
      "base_type": "Underlying primitive type",
      "constraints": "Validation rules (enum, range, regex, etc.)"
    },
    "reusability": "Can be used by multiple Properties across ObjectTypes"
  },
  "governance": {
    "roles": {
      "ontology_owner": {
        "permissions": ["all_edits", "all_settings", "assign_endorsed"],
        "level": "highest"
      },
      "ontology_editor": {
        "permissions": ["add_resources", "edit_resources", "delete_resources"],
        "constraints": ["some_actions_require_proposal"]
      },
      "ontology_viewer": {
        "permissions": ["read_ontology", "read_objects"],
        "constraints": ["no_edits"]
      }
    },
    "security": {
      "restricted_view": {
        "definition": "Foundry Dataset filtered view for row-level security",
        "use_case": "Limit visible rows based on user permissions"
      },
      "restricted_view_backed_object_type": {
        "definition": "ObjectType backed by Restricted View",
        "purpose": "Row-level security for sensitive data"
      },
      "object_security_policy": {
        "features": ["property_masking", "row_level_filter"],
        "integrates_with": "Mandatory Control Property"
      }
    },
    "audit": {
      "action_log": "Track all mutations with who/what/when",
      "history": "View/restore previous Ontology versions",
      "cleanup": "Remove unused/example resources"
    }
  },
  "interactions": {
    "object_type_to_link_type": {
      "relationship": "ObjectType can be source or target of LinkType",
      "constraints": {
        "cardinality_enforced": true,
        "foreign_key_required_for_non_n_n": true
      }
    },
    "action_type_to_object_type": {
      "operations": {
        "create": "ActionType creates new Object instance",
        "modify": "ActionType updates Object properties",
        "delete": "ActionType removes Object instance"
      },
      "constraints": {
        "submission_criteria": "Must pass before execution",
        "property_validation": "Must match PropertyDefinition constraints"
      }
    },
    "action_type_to_link_type": {
      "operations": {
        "link": "ActionType creates Link between Objects",
        "unlink": "ActionType removes Link between Objects"
      },
      "constraints": {
        "cardinality_check": "Must respect LinkType cardinality",
        "existence_check": "Both Objects must exist"
      }
    },
    "cascade_effects": {
      "object_delete": "All Links to/from Object auto-deleted",
      "link_type_delete": "All Link instances removed"
    }
  },
  "json_export_format": {
    "top_level_key": "ontology",
    "structure": {
      "ontology": {
        "objectTypes": "Array of ObjectType definitions",
        "linkTypes": "Array of LinkType definitions",
        "actionTypes": "Array of ActionType definitions",
        "interfaces": "Array of Interface definitions",
        "valueTypes": "Array of ValueType definitions",
        "structTypes": "Array of Struct definitions",
        "sharedProperties": "Array of SharedProperty definitions"
      }
    },
    "notes": [
      "RIDs auto-generated by system",
      "API names immutable once Active",
      "Status lifecycle must be respected"
    ]
  },
  "key_insights_for_refactoring": {
    "must_implement": [
      "Restricted View pattern for row-level security",
      "Mandatory Control Property with no-default enforcement",
      "Ontology JSON export with top-level 'ontology' key"
    ],
    "should_implement": [
      "Endorsed status for trusted ObjectTypes",
      "Interface polymorphism",
      "Value type constraints system"
    ],
    "design_principles": [
      "Primary key is mandatory for every ObjectType",
      "LinkType cardinality determines implementation (FK vs backing table)",
      "ActionType submission criteria are preconditions",
      "All mutations must be tracked in action log"
    ]
  }
}
