# =============================================================================
# Boris Cherny Parallel Session Configuration
# =============================================================================
# mprocs: Multi-process orchestrator for parallel Claude Code sessions
#
# Install: cargo install mprocs
# Run: mprocs --config ~/.claude/boris-workflow/mprocs.yaml
#
# Pattern: Each Claude instance operates on its own git worktree
# This prevents context conflicts and enables parallel task execution.
# =============================================================================

procs:
  # Main development session - primary workspace
  claude1:
    shell: "cd ~/workspace/repo-main && claude --resume"
    cwd: ~/workspace/repo-main
    autostart: true
    stop: SIGTERM

  # Feature branch session - isolated feature work
  claude2:
    shell: "cd ~/workspace/repo-feature && claude --resume"
    cwd: ~/workspace/repo-feature
    autostart: true
    stop: SIGTERM

  # Bug fix session - hotfix isolation
  claude3:
    shell: "cd ~/workspace/repo-bugfix && claude --resume"
    cwd: ~/workspace/repo-bugfix
    autostart: false
    stop: SIGTERM

  # Review session - code review and audit
  claude4:
    shell: "cd ~/workspace/repo-review && claude --resume"
    cwd: ~/workspace/repo-review
    autostart: false
    stop: SIGTERM

  # Experimental session - sandbox for testing
  claude5:
    shell: "cd ~/workspace/repo-sandbox && claude --resume"
    cwd: ~/workspace/repo-sandbox
    autostart: false
    stop: SIGTERM

# Keybindings for quick session navigation
keymap:
  # Toggle focus between sessions
  - { key: "1", action: { type: "focus", id: "claude1" } }
  - { key: "2", action: { type: "focus", id: "claude2" } }
  - { key: "3", action: { type: "focus", id: "claude3" } }
  - { key: "4", action: { type: "focus", id: "claude4" } }
  - { key: "5", action: { type: "focus", id: "claude5" } }

  # Start/stop sessions
  - { key: "s", action: { type: "start" } }
  - { key: "x", action: { type: "stop" } }
  - { key: "r", action: { type: "restart" } }

  # Scroll and search
  - { key: "/", action: { type: "search" } }
  - { key: "j", action: { type: "scroll-down" } }
  - { key: "k", action: { type: "scroll-up" } }

# Layout configuration
layout:
  cols:
    - procs: [claude1, claude2]
    - procs: [claude3, claude4, claude5]

# Settings
settings:
  mouse: true
  scrollback: 10000
