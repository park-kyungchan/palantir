# =============================================================================
# MathpixPipeline - Kubernetes Secret Template
# =============================================================================
#
# WARNING: This is an EXAMPLE file. DO NOT commit real secrets to version control!
#
# Usage:
#   1. Copy this file: cp secret.yaml.example secret.yaml
#   2. Replace placeholder values with real API keys
#   3. Apply: kubectl apply -f secret.yaml -n mathpix-pipeline
#   4. DELETE the file with real values: rm secret.yaml
#
# Alternative (recommended for production):
#   Use kubectl create secret instead of applying a file:
#
#   kubectl create secret generic mathpix-api-credentials \
#     --from-literal=MATHPIX_APP_ID='your_actual_app_id' \
#     --from-literal=MATHPIX_APP_KEY='your_actual_app_key' \
#     --from-literal=ANTHROPIC_API_KEY='your_actual_anthropic_key' \
#     --from-literal=GEMINI_API_KEY='your_actual_gemini_key' \
#     -n mathpix-pipeline
#
# For production environments, consider using:
#   - External Secrets Operator (AWS Secrets Manager, HashiCorp Vault, etc.)
#   - Sealed Secrets (Bitnami)
#   - SOPS (Mozilla)
#
# =============================================================================

apiVersion: v1
kind: Secret
metadata:
  name: mathpix-api-credentials
  namespace: mathpix-pipeline
  labels:
    app: mathpix-pipeline
    app.kubernetes.io/name: mathpix-pipeline
    app.kubernetes.io/component: secrets

# Secrets are base64 encoded by default
# Use stringData for plain text (Kubernetes will encode automatically)
type: Opaque

# Option 1: Plain text values (easier to read, Kubernetes encodes on apply)
stringData:
  # -------------------------------------------------------------------------
  # REQUIRED: Mathpix API Credentials
  # Get from: https://mathpix.com/ocr
  # -------------------------------------------------------------------------
  MATHPIX_APP_ID: "your_mathpix_app_id_here"
  MATHPIX_APP_KEY: "your_mathpix_app_key_here"

  # -------------------------------------------------------------------------
  # OPTIONAL: Anthropic API Key (for Claude vision analysis)
  # Get from: https://console.anthropic.com/
  # -------------------------------------------------------------------------
  ANTHROPIC_API_KEY: "your_anthropic_api_key_here"

  # -------------------------------------------------------------------------
  # OPTIONAL: Google Gemini API Key (for vision fallback)
  # Get from: https://makersuite.google.com/app/apikey
  # -------------------------------------------------------------------------
  GEMINI_API_KEY: "your_gemini_api_key_here"

# Option 2: Base64 encoded values (for programmatic generation)
# To encode: echo -n "your_secret" | base64
# To decode: echo "encoded_value" | base64 -d
#
# data:
#   MATHPIX_APP_ID: "eW91cl9tYXRocGl4X2FwcF9pZF9oZXJl"        # base64 of "your_mathpix_app_id_here"
#   MATHPIX_APP_KEY: "eW91cl9tYXRocGl4X2FwcF9rZXlfaGVyZQ=="    # base64 of "your_mathpix_app_key_here"
#   ANTHROPIC_API_KEY: "eW91cl9hbnRocm9waWNfYXBpX2tleV9oZXJl"  # base64 of "your_anthropic_api_key_here"
#   GEMINI_API_KEY: "eW91cl9nZW1pbmlfYXBpX2tleV9oZXJl"         # base64 of "your_gemini_api_key_here"

---
# =============================================================================
# External Secrets Operator Example (AWS Secrets Manager)
# Uncomment and configure if using External Secrets Operator
# =============================================================================
#
# apiVersion: external-secrets.io/v1beta1
# kind: ExternalSecret
# metadata:
#   name: mathpix-api-credentials
#   namespace: mathpix-pipeline
# spec:
#   refreshInterval: 1h
#   secretStoreRef:
#     name: aws-secretsmanager
#     kind: ClusterSecretStore
#   target:
#     name: mathpix-api-credentials
#     creationPolicy: Owner
#   data:
#     - secretKey: MATHPIX_APP_ID
#       remoteRef:
#         key: mathpix-pipeline/credentials
#         property: mathpix_app_id
#     - secretKey: MATHPIX_APP_KEY
#       remoteRef:
#         key: mathpix-pipeline/credentials
#         property: mathpix_app_key
#     - secretKey: ANTHROPIC_API_KEY
#       remoteRef:
#         key: mathpix-pipeline/credentials
#         property: anthropic_api_key
#     - secretKey: GEMINI_API_KEY
#       remoteRef:
#         key: mathpix-pipeline/credentials
#         property: gemini_api_key

---
# =============================================================================
# Sealed Secret Example (Bitnami Sealed Secrets)
# Uncomment and configure if using Sealed Secrets
# Generate with: kubeseal --format=yaml < secret.yaml > sealed-secret.yaml
# =============================================================================
#
# apiVersion: bitnami.com/v1alpha1
# kind: SealedSecret
# metadata:
#   name: mathpix-api-credentials
#   namespace: mathpix-pipeline
# spec:
#   encryptedData:
#     MATHPIX_APP_ID: AgBy3i4OJSWK+PiTySYZZA9rO43cGDEq...
#     MATHPIX_APP_KEY: AgBy3i4OJSWK+PiTySYZZA9rO43cGDEq...
#     ANTHROPIC_API_KEY: AgBy3i4OJSWK+PiTySYZZA9rO43cGDEq...
#     GEMINI_API_KEY: AgBy3i4OJSWK+PiTySYZZA9rO43cGDEq...
#   template:
#     metadata:
#       name: mathpix-api-credentials
#       namespace: mathpix-pipeline
