# Mathpix Convert API - Endpoints Reference
# Source: https://mathpix.com/docs/convert/endpoints
# Extracted: 2026-02-04

---
metadata:
  source_url: https://mathpix.com/docs/convert/endpoints
  title: "Convert API Endpoints"
  extraction_date: "2026-02-04"
  base_url: "https://api.mathpix.com"
  eu_base_url: "https://eu-central-1.api.mathpix.com"

---
# Authentication
authentication:
  server_side:
    headers:
      - name: "app_id"
        type: string
        required: true
        description: "Application identifier from console.mathpix.com"
      - name: "app_key"
        type: string
        required: true
        description: "API key from console.mathpix.com"
    warning: "Never include API keys in client-side code"

  client_side:
    header:
      - name: "app_token"
        type: string
        required: true
        description: "Temporary token from /v3/app-tokens endpoint"
    limitations:
      - "Cannot access PDF functionality"
      - "Cannot access historical data"
      - "Cannot access account admin data"
      - "Cannot make batch/async requests"

---
# Endpoint: v3/text
v3_text:
  path: "/v3/text"
  method: POST
  description: "Process individual images for OCR of equations, text, tables, and diagrams"

  content_types:
    - "application/json"
    - "multipart/form-data"

  authentication:
    - "app_id + app_key"
    - "app_token"

  request_parameters:
    image_source:
      src:
        type: string
        required: "if not using file upload"
        description: "Image URL or base64 data URI"
        formats:
          - "HTTP(S) URL"
          - "data:image/{format};base64,{encoded_data}"
      file:
        type: binary
        required: "if not using src"
        description: "Image file for multipart upload"
      options_json:
        type: string
        description: "JSON-encoded options for multipart upload"

    output_formats:
      formats:
        type: array
        default: ["text"]
        values:
          - text: "Mathpix Markdown output"
          - data: "Computed data list"
          - html: "HTML rendered output"
          - latex_styled: "Math LaTeX for equations"

    data_options:
      type: object
      properties:
        include_svg:
          type: boolean
          default: false
        include_table_html:
          type: boolean
          default: false
        include_latex:
          type: boolean
          default: false
        include_tsv:
          type: boolean
          default: false
        include_asciimath:
          type: boolean
          default: false
        include_mathml:
          type: boolean
          default: false

    segmentation:
      include_line_data:
        type: boolean
        default: false
        description: "Return line-by-line segmentation"
        note: "Mutually exclusive with include_word_data"
      include_word_data:
        type: boolean
        default: false
        description: "Return word-level segmentation"
        note: "Mutually exclusive with include_line_data"

    math_delimiters:
      math_inline_delimiters:
        type: array
        default: ["\\(", "\\)"]
      math_display_delimiters:
        type: array
        default: ["\\[", "\\]"]

    processing_options:
      rm_spaces:
        type: boolean
        default: true
      rm_fonts:
        type: boolean
        default: false
      include_equation_tags:
        type: boolean
        default: false
      include_smiles:
        type: boolean
        default: false
      include_geometry_data:
        type: boolean
        default: false
      include_diagram_text:
        type: boolean
        default: false
      include_page_info:
        type: boolean
        default: true

  response_fields:
    request_id:
      type: string
      description: "Unique request identifier"
    version:
      type: string
      description: "OCR engine version"
    text:
      type: string
      description: "Mathpix Markdown output"
    latex_styled:
      type: string
      description: "Math LaTeX"
    confidence:
      type: number
      range: [0, 1]
    confidence_rate:
      type: number
      range: [0, 1]
    is_printed:
      type: boolean
    is_handwritten:
      type: boolean
    line_data:
      type: array
      description: "Line-by-line data"
    word_data:
      type: array
      description: "Word-level data"

---
# Endpoint: v3/pdf
v3_pdf:
  path: "/v3/pdf"
  method: POST
  description: "Asynchronous PDF/document to Markdown/LaTeX/DOCX conversion"
  processing_mode: "asynchronous"
  max_file_size: "1GB"

  supported_inputs:
    - "PDF"
    - "EPUB"
    - "DOCX"
    - "PPTX"
    - "AZW/AZW3/KFX (Kindle)"
    - "MOBI"
    - "DJVU"
    - "DOC"
    - "WPD (WordPerfect)"
    - "ODT (OpenDocument)"

  supported_outputs:
    - format: "mmd"
      description: "Mathpix Markdown"
    - format: "md"
      description: "Standard Markdown"
    - format: "docx"
      description: "MS Word document"
    - format: "tex.zip"
      description: "LaTeX with images"
    - format: "html"
      description: "HTML file"
    - format: "pdf"
      description: "PDF (HTML rendering)"
    - format: "latex.pdf"
      description: "PDF (LaTeX rendering)"
    - format: "pptx"
      description: "PowerPoint"
    - format: "xlsx"
      description: "Excel spreadsheet"
    - format: "lines.json"
      description: "Line-by-line data"

  request_parameters:
    source:
      url:
        type: string
        description: "HTTP URL to PDF"
      file:
        type: binary
        description: "PDF file for multipart upload"
    options:
      streaming:
        type: boolean
        default: false
      page_ranges:
        type: string
        example: "2,4-6"
      conversion_formats:
        type: object
        description: "Formats to auto-convert"

  sub_endpoints:
    status:
      path: "/v3/pdf/{pdf_id}"
      method: GET
      description: "Check processing status"
      response:
        status:
          enum: ["received", "loaded", "split", "completed", "error"]
        num_pages:
          type: integer
        percent_done:
          type: number

    stream:
      path: "/v3/pdf/{pdf_id}/stream"
      method: GET
      description: "Stream page-by-page results"

    results:
      paths:
        - "/v3/pdf/{pdf_id}.mmd"
        - "/v3/pdf/{pdf_id}.md"
        - "/v3/pdf/{pdf_id}.docx"
        - "/v3/pdf/{pdf_id}.tex"
        - "/v3/pdf/{pdf_id}.html"
        - "/v3/pdf/{pdf_id}.pdf"
        - "/v3/pdf/{pdf_id}.latex.pdf"
        - "/v3/pdf/{pdf_id}.pptx"
        - "/v3/pdf/{pdf_id}.xlsx"
        - "/v3/pdf/{pdf_id}.lines.json"
      method: GET

    delete:
      path: "/v3/pdf/{pdf_id}"
      method: DELETE
      description: "Permanently delete PDF and outputs"

---
# Endpoint: v3/strokes
v3_strokes:
  path: "/v3/strokes"
  method: POST
  description: "Digital ink/handwriting recognition"

  features:
    - "Handwritten math recognition"
    - "Text recognition (Hindi, Latin alphabets)"
    - "Live drawing with intermediate results"
    - "Scribble to erase"
    - "Strikethrough support"

  request_parameters:
    strokes:
      type: object
      required: true
      properties:
        x:
          type: "array[array[number]]"
          description: "X coordinates per stroke"
        y:
          type: "array[array[number]]"
          description: "Y coordinates per stroke"
    strokes_session_id:
      type: string
      description: "Session ID for live updates"
    formats:
      type: array
      default: ["text"]

  live_updates:
    setup:
      - "Request app_token with include_strokes_session_id=true"
      - "Use strokes_session_id in requests"
      - "Send incremental strokes"
    billing: "Billed on first stroke, not token request"

---
# Endpoint: v3/batch
v3_batch:
  path: "/v3/batch"
  method: POST
  description: "Process multiple images in single request"

  note: "Consider using v3/text with async flag for new implementations"

  request_parameters:
    urls:
      type: object
      required: true
      description: "Key-URL pairs for images"
    callback:
      type: object
      required: true
      properties:
        post:
          type: string
          description: "URL to POST results"
    ocr_behavior:
      type: string
      enum: ["text", "latex"]
      default: "latex"

  sub_endpoints:
    status:
      path: "/v3/batch/{batch_id}"
      method: GET
      description: "Check batch processing status"

  retention: "Results available for ~2 days"

---
# Endpoint: v3/latex (Legacy)
v3_latex:
  path: "/v3/latex"
  method: POST
  description: "Legacy endpoint for equation images"
  status: "deprecated"
  recommendation: "Use v3/text instead"

  request_parameters:
    ocr:
      type: array
      default: ["math"]
      values:
        - "math"
        - "text"
    formats:
      type: array
      values:
        - "text"
        - "text_display"
        - "latex_normal"
        - "latex_styled"
        - "latex_simplified"
        - "latex_list"
        - "mathml"
        - "asciimath"
        - "wolfram"

---
# Endpoint: v3/converter
v3_converter:
  path: "/v3/converter"
  method: POST
  description: "Convert Mathpix Markdown to other formats"
  max_body_size: "10MB"

  request_parameters:
    mmd:
      type: string
      required: true
      description: "Mathpix Markdown content"
    formats:
      type: object
      required: true
      description: "Output formats to generate"
    conversion_options:
      type: object
      description: "Format-specific options"

  sub_endpoints:
    status:
      path: "/v3/converter/{conversion_id}"
      method: GET
    results:
      path: "/v3/converter/{conversion_id}.{format}"
      method: GET

---
# Endpoint: v3/ocr-results
v3_ocr_results:
  path: "/v3/ocr-results"
  method: GET
  description: "Search previous v3/text, v3/strokes, v3/latex results"

  note: "Only works with API keys created after July 5, 2020"

  query_parameters:
    page:
      type: integer
      default: 1
    per_page:
      type: integer
      default: 100
    from_date:
      type: string
      format: "ISO datetime"
    to_date:
      type: string
      format: "ISO datetime"
    text:
      type: string
      description: "Search in result.text"
    tags:
      type: array
      description: "Filter by tags"
    is_printed:
      type: boolean
    is_handwritten:
      type: boolean
    contains_table:
      type: boolean
    contains_chemistry:
      type: boolean
    contains_diagram:
      type: boolean

---
# Endpoint: v3/pdf-results
v3_pdf_results:
  path: "/v3/pdf-results"
  method: GET
  description: "Search v3/pdf POST request results"

  query_parameters:
    page:
      type: integer
      default: 1
    per_page:
      type: integer
      default: 100
    from_date:
      type: string
      format: "ISO datetime"
    to_date:
      type: string
      format: "ISO datetime"

---
# Endpoint: v3/ocr-usage
v3_ocr_usage:
  path: "/v3/ocr-usage"
  method: GET
  description: "Track API usage statistics"

  query_parameters:
    from_date:
      type: string
      format: "ISO datetime"
    to_date:
      type: string
      format: "ISO datetime"
    group_by:
      type: string
      enum: ["usage_type", "request_args_hash", "app_id"]
    timespan:
      type: string

---
# Endpoint: v3/app-tokens
v3_app_tokens:
  path: "/v3/app-tokens"
  method: POST
  description: "Generate short-lived client-side tokens"

  request_headers:
    app_key:
      type: string
      required: true

  request_parameters:
    include_strokes_session_id:
      type: boolean
      default: false
    expires:
      type: integer
      unit: seconds
      default: 300
      range:
        default: [30, 43200]
        with_strokes_session: [30, 300]

  response:
    app_token:
      type: string
    strokes_session_id:
      type: string
      condition: "when include_strokes_session_id=true"
    app_token_expires_at:
      type: number
      format: "Unix timestamp"

---
# HTTP Status Codes
http_status_codes:
  "200":
    description: "Success or handled error"
  "401":
    description: "Unauthorized - invalid credentials"
    error_id: "http_unauthorized"
  "429":
    description: "Too many requests - rate limited"
    error_id: "http_max_requests"
